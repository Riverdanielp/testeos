<?php

$to_score_in_half = '[
    {
        "odds": "",
        "id": "PC584069930",
        "name": "1st Half",
        "header": "Salernitana"
    },
    {
        "odds": "",
        "id": "PC584070522",
        "name": "2nd Half",
        "header": "Salernitana"
    },
    {
        "odds": "2.62",
        "id": "584069930",
        "header": "Yes"
    },
    {
        "odds": "2.10",
        "id": "584070522",
        "header": "Yes"
    },
    {
        "odds": "1.44",
        "id": "584069935",
        "header": "No"
    },
    {
        "odds": "1.66",
        "id": "584070523",
        "header": "No"
    },
    {
        "odds": "",
        "id": "PC584070291",
        "name": "1st Half",
        "header": "Atalanta"
    },
    {
        "odds": "",
        "id": "PC584070037",
        "name": "2nd Half",
        "header": "Atalanta"
    },
    {
        "odds": "1.66",
        "id": "584070291",
        "header": "Yes"
    },
    {
        "odds": "1.44",
        "id": "584070037",
        "header": "Yes"
    },
    {
        "odds": "2.10",
        "id": "584070292",
        "header": "No"
    },
    {
        "odds": "2.62",
        "id": "584070038",
        "header": "No"
    }
]';
$goals_over_under = '[{
        "odds": "",
        "id": "PC569936285",
        "name": "2.5",
        "header": " "
    },
    {
        "odds": "1.72",
        "id": "569936285",
        "header": "Over"
    },
    {
        "odds": "2.10",
        "id": "569936289",
        "header": "Under"
    }
]';
$result_both_teams_to_score = '[{
        "odds": "",
        "id": "PC610368593",
        "name": "General Caballero JLM",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368591",
        "name": "Guairena FC",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368595",
        "name": "Draw",
        "header": " "
    },
    {
        "odds": "4.75",
        "id": "610368593",
        "header": "Yes"
    },
    {
        "odds": "7.00",
        "id": "610368591",
        "header": "Yes"
    },
    {
        "odds": "4.50",
        "id": "610368595",
        "header": "Yes"
    },
    {
        "odds": "3.50",
        "id": "610368594",
        "header": "No"
    },
    {
        "odds": "5.50",
        "id": "610368592",
        "header": "No"
    },
    {
        "odds": "8.50",
        "id": "610368598",
        "header": "No"
    }
]';
$corners = '[{
        "odds": "",
        "id": "PC615628213",
        "name": "9",
        "header": " "
    },
    {
        "odds": "2.20",
        "id": "615628213",
        "header": "Over"
    },
    {
        "odds": "7.50",
        "id": "615628220",
        "header": "Exactly"
    },
    {
        "odds": "2.00",
        "id": "615628224",
        "header": "Under"
    }
]';
$alternative_corners = '[
    {
        "odds": "",
        "id": "PC615629367",
        "name": "4",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615629350",
        "name": "5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615629394",
        "name": "6",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615629375",
        "name": "7",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615629407",
        "name": "8",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615629356",
        "name": "10",
        "header": " "
    },
    {
        "odds": "1.04",
        "id": "615629367",
        "header": "Over"
    },
    {
        "odds": "1.10",
        "id": "615629350",
        "header": "Over"
    },
    {
        "odds": "1.22",
        "id": "615629394",
        "header": "Over"
    },
    {
        "odds": "1.40",
        "id": "615629375",
        "header": "Over"
    },
    {
        "odds": "1.72",
        "id": "615629407",
        "header": "Over"
    },
    {
        "odds": "3.00",
        "id": "615629356",
        "header": "Over"
    },
    {
        "odds": "17.00",
        "id": "615629412",
        "header": "Exactly"
    },
    {
        "odds": "12.00",
        "id": "615629363",
        "header": "Exactly"
    },
    {
        "odds": "9.00",
        "id": "615629404",
        "header": "Exactly"
    },
    {
        "odds": "8.00",
        "id": "615629397",
        "header": "Exactly"
    },
    {
        "odds": "7.50",
        "id": "615629355",
        "header": "Exactly"
    },
    {
        "odds": "8.50",
        "id": "615629368",
        "header": "Exactly"
    },
    {
        "odds": "23.00",
        "id": "615629413",
        "header": "Under"
    },
    {
        "odds": "13.00",
        "id": "615629374",
        "header": "Under"
    },
    {
        "odds": "7.00",
        "id": "615629364",
        "header": "Under"
    },
    {
        "odds": "4.00",
        "id": "615629354",
        "header": "Under"
    },
    {
        "odds": "2.75",
        "id": "615629377",
        "header": "Under"
    },
    {
        "odds": "1.61",
        "id": "615629358",
        "header": "Under"
    }
]';
$corners_2_way = '[{
        "odds": "",
        "id": "PC615628186",
        "name": "8.5",
        "header": " "
    },
    {
        "odds": "1.72",
        "id": "615628186",
        "header": "Over"
    },
    {
        "odds": "2.00",
        "id": "615628191",
        "header": "Under"
    }
]';
$first_half_corners = '[{
        "odds": "",
        "id": "PC615628201",
        "name": "4",
        "header": " "
    },
    {
        "odds": "2.10",
        "id": "615628201",
        "header": "Over"
    },
    {
        "odds": "5.00",
        "id": "615628207",
        "header": "Exactly"
    },
    {
        "odds": "2.40",
        "id": "615628209",
        "header": "Under"
    }
]';
$alternative_total_goals = '[{
        "odds": "",
        "id": "PC610368096",
        "name": "0.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368098",
        "name": "1.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368092",
        "name": "3.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368101",
        "name": "4.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368093",
        "name": "5.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368099",
        "name": "6.5",
        "header": " "
    },
    {
        "odds": "1.07",
        "id": "610368096",
        "header": "Over"
    },
    {
        "odds": "1.33",
        "id": "610368098",
        "header": "Over"
    },
    {
        "odds": "3.75",
        "id": "610368092",
        "header": "Over"
    },
    {
        "odds": "8.00",
        "id": "610368101",
        "header": "Over"
    },
    {
        "odds": "19.00",
        "id": "610368093",
        "header": "Over"
    },
    {
        "odds": "41.00",
        "id": "610368099",
        "header": "Over"
    },
    {
        "odds": "8.50",
        "id": "610368097",
        "header": "Under"
    },
    {
        "odds": "3.25",
        "id": "610368091",
        "header": "Under"
    },
    {
        "odds": "1.25",
        "id": "610368100",
        "header": "Under"
    },
    {
        "odds": "1.08",
        "id": "610368102",
        "header": "Under"
    },
    {
        "odds": "1.02",
        "id": "610368094",
        "header": "Under"
    },
    {
        "odds": "1.00",
        "id": "610368095",
        "header": "Under"
    }
]';
$alternative_total_goals = '[
    {
        "odds": "",
        "id": "PC615687875",
        "name": "0.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687867",
        "name": "1.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687893",
        "name": "3.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687869",
        "name": "4.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687879",
        "name": "5.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687888",
        "name": "6.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687863",
        "name": "7.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC615687873",
        "name": "8.5",
        "header": " "
    },
    {
        "odds": "1.01",
        "id": "615687875",
        "header": "Over"
    },
    {
        "odds": "1.12",
        "id": "615687867",
        "header": "Over"
    },
    {
        "odds": "2.10",
        "id": "615687893",
        "header": "Over"
    },
    {
        "odds": "3.50",
        "id": "615687869",
        "header": "Over"
    },
    {
        "odds": "6.00",
        "id": "615687879",
        "header": "Over"
    },
    {
        "odds": "9.00",
        "id": "615687888",
        "header": "Over"
    },
    {
        "odds": "13.00",
        "id": "615687863",
        "header": "Over"
    },
    {
        "odds": "21.00",
        "id": "615687873",
        "header": "Over"
    },
    {
        "odds": "15.00",
        "id": "615687885",
        "header": "Under"
    },
    {
        "odds": "5.50",
        "id": "615687876",
        "header": "Under"
    },
    {
        "odds": "1.66",
        "id": "615687886",
        "header": "Under"
    },
    {
        "odds": "1.28",
        "id": "615687887",
        "header": "Under"
    },
    {
        "odds": "1.11",
        "id": "615687882",
        "header": "Under"
    },
    {
        "odds": "1.04",
        "id": "615687884",
        "header": "Under"
    },
    {
        "odds": "1.01",
        "id": "615687889",
        "header": "Under"
    },
    {
        "odds": "1.00",
        "id": "615687866",
        "header": "Under"
    }
]';
$result_total_goals = '[
    {
        "odds": "",
        "id": "PC610368341",
        "name": "General Caballero JLM",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368350",
        "name": "Guairena FC",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368343",
        "name": "Draw",
        "header": " "
    },
    {
        "odds": "3.75",
        "id": "610368341",
        "header": "Over",
        "handicap": "2.5"
    },
    {
        "odds": "5.50",
        "id": "610368350",
        "header": "Over",
        "handicap": "2.5"
    },
    {
        "odds": "13.00",
        "id": "610368343",
        "header": "Over",
        "handicap": "2.5"
    },
    {
        "odds": "4.50",
        "id": "610368342",
        "header": "Under",
        "handicap": "2.5"
    },
    {
        "odds": "6.50",
        "id": "610368340",
        "header": "Under",
        "handicap": "2.5"
    },
    {
        "odds": "4.00",
        "id": "610368344",
        "header": "Under",
        "handicap": "2.5"
    }
]';
$first_half_goals = '[
    {
        "odds": "",
        "id": "PC610368410",
        "name": "0.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368369",
        "name": "1.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368385",
        "name": "2.5",
        "header": " "
    },
    {
        "odds": "",
        "id": "PC610368400",
        "name": "3.5",
        "header": " "
    },
    {
        "odds": "1.44",
        "id": "610368410",
        "header": "Over"
    },
    {
        "odds": "3.25",
        "id": "610368369",
        "header": "Over"
    },
    {
        "odds": "9.00",
        "id": "610368385",
        "header": "Over"
    },
    {
        "odds": "26.00",
        "id": "610368400",
        "header": "Over"
    },
    {
        "odds": "2.62",
        "id": "610368360",
        "header": "Under"
    },
    {
        "odds": "1.33",
        "id": "610368371",
        "header": "Under"
    },
    {
        "odds": "1.07",
        "id": "610368394",
        "header": "Under"
    },
    {
        "odds": "1.01",
        "id": "610368406",
        "header": "Under"
    }
]';
$goals_over_under = json_decode($goals_over_under,true);
$to_score_in_half = json_decode($to_score_in_half,true);
$result_both_teams_to_score = json_decode($result_both_teams_to_score,true);
$corners = json_decode($corners,true);
$alternative_corners = json_decode($alternative_corners,true);
$corners_2_way = json_decode($corners_2_way,true);
$first_half_corners = json_decode($first_half_corners,true); 
$alternative_total_goals = json_decode($alternative_total_goals,true);
$result_total_goals = json_decode($result_total_goals,true);
$first_half_goals = json_decode($first_half_goals,true);


 
// $reorganized = reorganizeArray($goals_over_under,'goals_over_under');
// $reorganized = reorganizeArray($to_score_in_half,'to_score_in_half');
// $reorganized = reorganizeArray($result_both_teams_to_score,'result_both_teams_to_score');
// $reorganized = reorganizeArray($corners,'corners');
// $reorganized = reorganizeArray($alternative_corners,'alternative_corners');
// $reorganized = reorganizeArray($corners_2_way,'corners_2_way'); 
// $reorganized = reorganizeArray($first_half_corners,'first_half_corners');
// $reorganized = reorganizeArray($alternative_total_goals,'alternative_total_goals');
// $reorganized = reorganizeArray($result_total_goals,'result_total_goals');
$reorganized = reorganizeArray($first_half_goals,'first_half_goals');

echo '<pre>';
var_dump($reorganized);
echo '</pre>';
 

function reorganizeArray($array, $name, $id = '') {
    $result = array();
    // Obtener las opciones principales (equipos o valores numéricos)
    if ($name == 'result_both_teams_to_score'){
        $local = $array['0'];
        $visitante = $array['1'];
        $empate = $array['2'];
        $i = 0;
        foreach ($array as $item){
            if ($i == 3 || $i == 6 ){
                $data_principal = $local;
            } elseif ($i == 4 || $i == 7){
                $data_principal = $visitante;
            } elseif ($i == 5 || $i == 8){
                $data_principal = $empate;
            }
            if ($item['odds'] > 0){
                $sub_array = array(
                    "id" => $item['id'],
                    "odds" => $item['odds'],
                    "header" => $item['header'],
                    "name" => $data_principal['name'],
                    "team" => $data_principal['header']
                );
                $result[] = $sub_array;
            }
            $i++;
        }
    } elseif ($name == 'to_score_in_half'){
        $H1T1 = $array['0'];
        $H2T1 = $array['1'];
        $H1T2 = $array['6'];
        $H2T2 = $array['7'];
        $i = 0;
        foreach ($array as $item){
            if ($i == 2 || $i == 4 ){
                $data_principal = $H1T1;
            } elseif ($i == 3 || $i == 5){
                $data_principal = $H2T1;
            } elseif ($i == 8 || $i == 10){
                $data_principal = $H1T2;
            } elseif ($i == 9 || $i == 11){
                $data_principal = $H2T2;
            }
            if ($item['odds'] > 0){
                $sub_array = array(
                    "id" => $item['id'],
                    "odds" => $item['odds'],
                    "header" => $item['header'],
                    "name" => $data_principal['name'],
                    "team" => $data_principal['header']
                );
                $result[] = $sub_array;
            }
            $i++;
        }
    } elseif ($name == 'goals_over_under' || $name == 'corners' || $name == 'corners_2_way' || $name == 'first_half_corners'){
        $data_principal = $array['0'];
        $i = 0;
        foreach ($array as $item){
            if ($item['odds'] > 0){
                $sub_array = array(
                    "id" => $item['id'],
                    "odds" => $item['odds'],
                    "header" => $item['header'],
                    "name" => $data_principal['name']
                );
                $result[] = $sub_array;
            }
            $i++;
        }
    } elseif ($name == 'alternative_total_goals' || $name == 'alternative_corners' || $name == 'first_half_goals' || $name == '2nd_half_goals'){
        $options = array();
        $count = 0;
        foreach ($array as $item){
            if (!($item['odds'] > 0)){
                $options[] = $item;
                $count++;
            }
        }
        $i = 0;
        foreach ($array as $item){
            if ($i >= $count){
                $i = 0;
            };
            $data_principal = $options[$i];
            if ($item['odds'] > 0){
                $sub_array = array(
                    "id" => $item['id'],
                    "odds" => $item['odds'],
                    "header" => $item['header'],
                    "name" => $data_principal['name'],
                );
                $result[] = $sub_array;
            }
            $i++;
        }
    } elseif ($name == 'result_total_goals' || $name == 'result_total_goals'){
        $options = array();
        $count = 0;
        foreach ($array as $item){
            if (!($item['odds'] > 0)){
                $options[] = $item;
                $count++;
            }
        }
        $i = 0;
        foreach ($array as $item){
            if ($i >= $count){
                $i = 0;
            };
            $data_principal = $options[$i];
            if ($item['odds'] > 0){
                $sub_array = array(
                    "id" => $item['id'],
                    "odds" => $item['odds'],
                    "header" => $item['header'],
                    "name" => $data_principal['name'],
                    "handicap" => $item['handicap'],
                );
                $result[] = $sub_array;
            }
            $i++;
        }
    }
    $data = array(
        'id' => $id,
        'name' => $name,
        'odds' => $result
    );
    return $data;
}

function reorganize($array){
    $reorganize = array();
    $principal = array();
    $opciones = array();
    foreach ($array as $item){
        if ($item['odds'] == ''){
            $principal[] = $item;
        } else {
            $opciones[] = $item;
        }
    }
    // echo '<pre>';
    // var_dump($opciones);
    // echo '</pre>';
     
};













?>